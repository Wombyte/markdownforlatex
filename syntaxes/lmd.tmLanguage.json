{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"scopeName": "source.lmd",
	"name": "LatexMarkdown",
	"patterns": [
		{ "include": "#body" },
		{ "include": "#line" },
		{ "include": "#latexcontent" }
	],
	"repository": {
		"body": {
			"name": "lmd.body",
			"begin": "_startdocument.*$\n?",
			"beginCaptures": {
				"0": { "name": "invalid.illegal" }
			},
			"patterns": [
				{ "include": "#headline" },
				{ "include": "#command" },
				{ "include": "#note" },
				{ "include": "#defnote" },
				{ "include": "#latexcontent" }
			],
			"repository": {},
			"end": "(?=not)possible"
		},
		"headline": {
			"name": "markup.bold",
			"begin": "#",
			"end": "$\n?"
		},
		"command": {
			"name": "markup.italic",
			"begin": "_",
			"end": "$\n?"
		},
		"notewithhead": {
			"begin": "\\S+\\s\\s",
			"end": "$\n?",
			"beginCaptures": {
				"0": { "name": "markup.bold" }
			},
			"patterns": [{ "include": "#latexcontent" }]
		},
		"notewithouthead": {
			"begin": "\\s",
			"end": "$\n?",
			"patterns": [{ "include": "#latexcontent" }]
		},
		"note": {
			"begin": "(,|\\.|\\*|\\+|\\-|=>|\"|eg|!|\\[\\S*\\])",
			"beginCaptures": {
				"0": { "name": "markup.bold" }
			},
			"end": "$\n?",
			"patterns": [
				{ "include": "#notewithhead" },
				{ "include": "#notewithouthead" }
			]
		},
		"defwithouthead": {
			"begin": " ([^ ]+ )+ ",
			"beginCaptures": {
				"0": { "patterns": [{ "include": "#latexcontent" }] }
			},
			"end": "$\n?",
			"patterns": [
				{
					"begin": "([^ ]+ )+ ",
					"beginCaptures": {
						"0": { "name": "markup.bold" }
					},
					"end": "$\n?",
					"patterns": [{ "include": "#latexcontent" }]
				}
			]
		},
		"defnote": {
			"begin": ">",
			"beginCaptures": {
				"0": { "name": "markup.bold" }
			},
			"end": "$\n?",
			"patterns": [
				{ "include": "#notewithhead" },
				{ "include": "#defwithouthead" }
			]
		},
		"latexcontent": {
			"name": "meta.embedded.latex",
			"patterns": [{ "include": "text.tex" }]
		}
	}
}
